syntax = "proto3";

package ankrscan.nodeproxy;

option go_package = "./;proto";
import "block-store.proto";

service NodeProxy {
  rpc BlockByNumber (BlockByNumberRequest) returns (BlockByNumberReply);
  rpc LatestBlockHeader (LatestBlockHeaderRequest) returns (LatestBlockHeaderReply);
  rpc CallContractBatch (CallContractBatchRequest) returns (CallContractBatchReply);
}

message BlockByNumberRequest {
  string blockchain_name = 1;
  uint64 block_height = 2;
}

message BlockByNumberReply {
  blockstore.Block block = 1;
}

message LatestBlockHeaderRequest {
  string blockchain_name = 1;
}

message LatestBlockHeaderReply {
  blockstore.BlockHeader header = 1;
}

message CallContractBatchRequest {
  message CallContractRequest {
    bytes contract_address = 2;
    bytes arguments = 3;
    uint64 block_height = 4;
  }

  repeated CallContractRequest requests = 1;
  string blockchain_name = 2;
}

message CallContractBatchReply {
  repeated bytes results = 1;
}
